<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DÃ¶ner AI - Dinozor Oyunu</title>
    <link rel="icon" type="image/webp" href="IMG_20260120_134136_893.webp">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .game-container {
            text-align: center;
            background: rgba(0, 0, 0, 0.05);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .game-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .game-stats {
            display: flex;
            gap: 30px;
            font-weight: bold;
            font-size: 16px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
        }

        .stat-value {
            color: #22c55e;
            font-size: 24px;
        }

        #gameCanvas {
            border: 2px solid #333;
            background: #fff;
            display: block;
            margin: 0 auto 15px;
            image-rendering: pixelated;
            cursor: none;
        }

        .controls {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .game-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            font-size: 14px;
            font-weight: bold;
            border: 2px solid #333;
            background: #22c55e;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background: #16a34a;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .info-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
            font-size: 13px;
            color: #333;
            text-align: left;
        }

        .game-over-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 40px;
            border-radius: 10px;
            text-align: center;
            z-index: 100;
            display: none;
            min-width: 280px;
        }

        .game-over-screen h2 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        .game-over-stats {
            font-size: 18px;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 5px;
        }

        .game-over-stats p {
            margin: 8px 0;
        }

        .game-over-stats .high-score {
            color: #fbbf24;
            font-weight: bold;
        }

        .night-mode #gameCanvas {
            background: #1a1a1a;
            border-color: #f0f0f0;
        }

        .night-mode .game-title {
            color: #f0f0f0;
        }

        .night-mode .stat-value {
            color: #fbbf24;
        }

        .night-mode .controls {
            color: #ccc;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .game-container {
                padding: 15px;
            }

            .game-header {
                gap: 10px;
                margin-bottom: 10px;
            }

            .game-title {
                font-size: 18px;
            }

            .game-stats {
                gap: 15px;
                font-size: 14px;
            }

            .stat-value {
                font-size: 18px;
            }

            .controls {
                font-size: 12px;
            }

            button {
                padding: 8px 15px;
                font-size: 12px;
            }

            .info-box {
                font-size: 12px;
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <div class="game-title">ðŸ¦– DÃ¶ner AI Dinozor</div>
            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-label">Puan</div>
                    <div class="stat-value" id="score">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Rekor</div>
                    <div class="stat-value" id="highScore">0</div>
                </div>
            </div>
        </div>

        <canvas id="gameCanvas" width="800" height="300"></canvas>

        <div class="controls">
            <p>ðŸŽ® <strong>KONTROLLER:</strong> BOÅžLUK veya â†‘ = ZÄ±pla | S veya â†“ = EÄŸil</p>
            <p>ðŸ“± <strong>MOBÄ°L:</strong> Ekrana dokunun = ZÄ±pla | Ä°ki parmakla = EÄŸil</p>
        </div>

        <div class="game-buttons">
            <button id="startBtn">BaÅŸla</button>
            <button id="pauseBtn">Duraklat</button>
            <button id="resetBtn">SÄ±fÄ±rla</button>
        </div>

        <div class="info-box">
            <strong>ðŸŽ¯ Oyun KurallarÄ±:</strong> Dinozoru engellerin Ã¼zerinden atlamasÄ±nÄ± saÄŸla. PuanÄ±nÄ± artÄ±r ve rekor kÄ±r! ðŸŒ™ Her 500 puan aldÄ±ÄŸÄ±nda gece modu aÃ§Ä±lÄ±yor.
        </div>
    </div>

    <div class="game-over-screen" id="gameOverScreen">
        <h2>OYUN BÄ°TTÄ°!</h2>
        <div class="game-over-stats">
            <p>Puan: <strong id="finalScore">0</strong></p>
            <p class="high-score">Rekor: <strong id="finalHighScore">0</strong></p>
        </div>
        <button onclick="location.reload()">Yeniden Oynat</button>
    </div>

    <script>
        // ================================
        // CANVAS ve OYUN SETUP
        // ================================
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score');
        const highScoreDisplay = document.getElementById('highScore');
        const gameOverScreen = document.getElementById('gameOverScreen');

        let gameState = {
            running: false,
            paused: false,
            gameOver: false,
            score: 0,
            highScore: localStorage.getItem('dinerAiHighScore') || 0,
            gameSpeed: 7,
            nightMode: false,
            frameCount: 0
        };

        // ================================
        // DÄ°NAZOR SINIFI
        // ================================
        class Dino {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 40;
                this.height = 55;
                this.velocityY = 0;
                this.isJumping = false;
                this.isDucking = false;
                this.jumpPower = 12;
                this.gravity = 0.6;
                this.groundY = canvas.height - 80;
            }

            jump() {
                if (!this.isJumping) {
                    this.velocityY = -this.jumpPower;
                    this.isJumping = true;
                }
            }

            duck(isDucking) {
                this.isDucking = isDucking;
            }

            update() {
                if (this.isJumping) {
                    this.velocityY += this.gravity;
                    this.y += this.velocityY;

                    if (this.y >= this.groundY) {
                        this.y = this.groundY;
                        this.velocityY = 0;
                        this.isJumping = false;
                    }
                }
            }

            draw() {
                // Dinazor gÃ¶vdesi
                ctx.fillStyle = gameState.nightMode ? '#FFD700' : '#22c55e';
                if (this.isDucking) {
                    ctx.fillRect(this.x, this.y + 20, this.width + 15, this.height - 25);
                } else {
                    ctx.fillRect(this.x, this.y, this.width, this.height);
                }

                // GÃ¶z
                ctx.fillStyle = gameState.nightMode ? '#1a1a1a' : '#fff';
                if (!this.isDucking) {
                    ctx.fillRect(this.x + 28, this.y + 8, 6, 6);
                }

                // Bacak
                ctx.fillStyle = gameState.nightMode ? '#FFD700' : '#22c55e';
                ctx.fillRect(this.x + 10, this.y + this.height - 5, 5, 8);
                ctx.fillRect(this.x + 25, this.y + this.height - 5, 5, 8);
            }

            getBounds() {
                if (this.isDucking) {
                    return {
                        x: this.x,
                        y: this.y + 20,
                        width: this.width + 15,
                        height: this.height - 25
                    };
                }
                return { x: this.x, y: this.y, width: this.width, height: this.height };
            }
        }

        // ================================
        // KAKTÃœS SINIFI
        // ================================
        class Cactus {
            constructor(x, y, width, height) {
                this.x = x;
                this.y = y;
                this.width = width;
                this.height = height;
                this.speed = gameState.gameSpeed;
            }

            update() {
                this.x -= this.speed;
                this.speed = gameState.gameSpeed;
            }

            draw() {
                ctx.fillStyle = gameState.nightMode ? '#ff6b6b' : '#ef4444';
                ctx.fillRect(this.x, this.y, this.width, this.height);

                // KaktÃ¼s dikenler
                ctx.fillRect(this.x - 5, this.y + 8, 5, 8);
                ctx.fillRect(this.x + this.width, this.y + 8, 5, 8);
            }

            isOffScreen() {
                return this.x + this.width < 0;
            }

            getBounds() {
                return { x: this.x, y: this.y, width: this.width, height: this.height };
            }
        }

        // ================================
        // KUÅž (PTERODAKTIL) SINIFI
        // ================================
        class Bird {
            constructor(x, heightLevel) {
                this.x = x;
                this.width = 45;
                this.height = 28;
                this.speed = gameState.gameSpeed + 1;

                // ÃœÃ§ farklÄ± yÃ¼kseklik
                const heights = {
                    low: canvas.height - 100,
                    medium: canvas.height - 140,
                    high: canvas.height - 180
                };
                this.y = heights[heightLevel];
                this.heightLevel = heightLevel;

                this.wingFrame = 0;
                this.wingFrameMax = 8;
            }

            update() {
                this.x -= this.speed;
                this.speed = gameState.gameSpeed + 1;
                this.wingFrame = (this.wingFrame + 1) % (this.wingFrameMax * 2);
            }

            draw() {
                ctx.fillStyle = gameState.nightMode ? '#87CEEB' : '#3b82f6';

                // GÃ¶vde
                ctx.fillRect(this.x + 5, this.y + 8, 25, 12);

                // BaÅŸ
                ctx.fillRect(this.x + 30, this.y + 5, 12, 15);

                // GÃ¶zler
                ctx.fillStyle = gameState.nightMode ? '#1a1a1a' : '#fff';
                ctx.fillRect(this.x + 38, this.y + 8, 3, 3);

                // Kanatlar (animasyon)
                ctx.fillStyle = gameState.nightMode ? '#87CEEB' : '#3b82f6';
                const wingBeat = Math.sin((this.wingFrame / this.wingFrameMax) * Math.PI) * 4;
                ctx.beginPath();
                ctx.moveTo(this.x + 10, this.y + 8);
                ctx.lineTo(this.x - 5 + wingBeat, this.y + 2);
                ctx.lineTo(this.x + 15, this.y + 8);
                ctx.fill();

                ctx.beginPath();
                ctx.moveTo(this.x + 20, this.y + 8);
                ctx.lineTo(this.x + 40 + wingBeat, this.y + 2);
                ctx.lineTo(this.x + 25, this.y + 8);
                ctx.fill();
            }

            isOffScreen() {
                return this.x + this.width < 0;
            }

            getBounds() {
                return { x: this.x + 5, y: this.y + 5, width: this.width - 10, height: this.height - 10 };
            }
        }

        // ================================
        // ENGELLER YÃ–NETÄ°CÄ°SÄ°
        // ================================
        class ObstacleManager {
            constructor() {
                this.obstacles = [];
                this.spawnRate = 120;
                this.spawnCounter = 0;
            }

            update() {
                this.spawnCounter++;

                if (this.spawnCounter >= this.spawnRate) {
                    this.spawn();
                    this.spawnCounter = 0;
                    this.spawnRate = Math.max(60, this.spawnRate - 0.5);
                }

                this.obstacles = this.obstacles.filter(obs => !obs.isOffScreen());
                this.obstacles.forEach(obs => obs.update());
            }

            spawn() {
                const rand = Math.random();

                if (rand < 0.6) {
                    // KaktÃ¼s
                    const cactiTypes = [
                        { width: 15, height: 40 },
                        { width: 25, height: 40 },
                        { width: 15, height: 50 }
                    ];
                    const type = cactiTypes[Math.floor(Math.random() * cactiTypes.length)];
                    this.obstacles.push(
                        new Cactus(canvas.width, canvas.height - 80 - type.height, type.width, type.height)
                    );
                } else {
                    // KuÅŸ
                    const heights = ['low', 'medium', 'high'];
                    const heightLevel = heights[Math.floor(Math.random() * heights.length)];
                    this.obstacles.push(new Bird(canvas.width, heightLevel));
                }
            }

            draw() {
                this.obstacles.forEach(obs => obs.draw());
            }

            checkCollision(dinoBounds) {
                for (let obs of this.obstacles) {
                    const obsBounds = obs.getBounds();
                    if (this.isColliding(dinoBounds, obsBounds)) {
                        return true;
                    }
                }
                return false;
            }

            isColliding(a, b) {
                return (
                    a.x < b.x + b.width &&
                    a.x + a.width > b.x &&
                    a.y < b.y + b.height &&
                    a.y + a.height > b.y
                );
            }

            clear() {
                this.obstacles = [];
                this.spawnCounter = 0;
            }
        }

        // ================================
        // OYUN MOTORUnun LOJÄ°ÄžÄ°
        // ================================
        const dino = new Dino(100, canvas.height - 135);
        const obstacleManager = new ObstacleManager();

        function updateNightMode() {
            const nightModeThreshold = 500;
            const scoreThreshold = Math.floor(gameState.score / nightModeThreshold);
            gameState.nightMode = scoreThreshold % 2 === 1;

            if (gameState.nightMode) {
                document.body.classList.add('night-mode');
            } else {
                document.body.classList.remove('night-mode');
            }
        }

        function update() {
            if (gameState.gameOver || !gameState.running || gameState.paused) return;

            dino.update();
            obstacleManager.update();

            // PuanÄ± artÄ±r
            gameState.frameCount++;
            if (gameState.frameCount % 10 === 0) {
                gameState.score++;
                scoreDisplay.innerText = gameState.score;
                updateNightMode();
            }

            // HÄ±z artÄ±rma
            gameState.gameSpeed = 7 + gameState.score / 100;

            // Ã‡arpÄ±ÅŸma kontrolÃ¼
            const dinoBounds = dino.getBounds();
            if (obstacleManager.checkCollision(dinoBounds)) {
                gameState.gameOver = true;
                endGame();
            }
        }

        function draw() {
            // Arka plan
            if (gameState.nightMode) {
                ctx.fillStyle = '#1a1a1a';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            } else {
                ctx.fillStyle = '#fff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }

            // Bulutlar
            drawClouds();

            // Zemin
            ctx.strokeStyle = gameState.nightMode ? '#f0f0f0' : '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, canvas.height - 80);
            ctx.lineTo(canvas.width, canvas.height - 80);
            ctx.stroke();

            // Zemin deseni
            ctx.strokeStyle = gameState.nightMode ? 'rgba(240, 240, 240, 0.3)' : 'rgba(51, 51, 51, 0.2)';
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width; i += 30) {
                ctx.beginPath();
                ctx.moveTo(i - (gameState.frameCount % 30), canvas.height - 75);
                ctx.lineTo(i + 10 - (gameState.frameCount % 30), canvas.height - 80);
                ctx.stroke();
            }

            obstacleManager.draw();
            dino.draw();
        }

        function drawClouds() {
            const cloudColor = gameState.nightMode ? 'rgba(100, 100, 100, 0.4)' : 'rgba(200, 200, 200, 0.5)';
            ctx.fillStyle = cloudColor;

            const cloudY = 50;
            const cloudOffset = (gameState.frameCount / 2) % canvas.width;

            for (let i = -1; i < 3; i++) {
                const x = i * 250 + cloudOffset;
                // Basit bulut ÅŸekli
                ctx.beginPath();
                ctx.ellipse(x, cloudY, 35, 15, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.beginPath();
                ctx.ellipse(x + 30, cloudY - 5, 25, 12, 0, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function startGame() {
            gameState.running = true;
            gameState.paused = false;
            gameState.gameOver = false;
            gameState.score = 0;
            gameState.gameSpeed = 7;
            gameState.frameCount = 0;
            gameOverScreen.style.display = 'none';
            obstacleManager.clear();
            dino.y = canvas.height - 135;
            dino.velocityY = 0;
            dino.isJumping = false;
            scoreDisplay.innerText = '0';
            updateNightMode();
        }

        function pauseGame() {
            gameState.paused = !gameState.paused;
            document.getElementById('pauseBtn').innerText = gameState.paused ? 'Devam Et' : 'Duraklat';
        }

        function endGame() {
            gameState.running = false;

            if (gameState.score > gameState.highScore) {
                gameState.highScore = gameState.score;
                localStorage.setItem('dinerAiHighScore', gameState.highScore);
                highScoreDisplay.innerText = gameState.highScore;
            }

            document.getElementById('finalScore').innerText = gameState.score;
            document.getElementById('finalHighScore').innerText = gameState.highScore;
            gameOverScreen.style.display = 'block';
        }

        // ================================
        // KONTROLLER
        // ================================
        const keys = {};

        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;

            if (e.key === ' ' || e.key === 'ArrowUp') {
                e.preventDefault();
                if (gameState.running) dino.jump();
            }

            if (e.key === 's' || e.key === 'S' || e.key === 'ArrowDown') {
                e.preventDefault();
                if (gameState.running) dino.duck(true);
            }
        });

        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;

            if (e.key === 's' || e.key === 'S' || e.key === 'ArrowDown') {
                if (gameState.running) dino.duck(false);
            }
        });

        // MOBÄ°L KONTROLLERI
        let touchStartX = 0;
        let touchStartY = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;

            if (gameState.running && e.touches.length === 1) {
                dino.jump();
            }
        });

        document.addEventListener('touchmove', (e) => {
            if (gameState.running && e.touches.length === 2) {
                dino.duck(true);
            }
        });

        document.addEventListener('touchend', (e) => {
            if (e.touches.length === 0) {
                dino.duck(false);
            }
        });

        // ================================
        // BUTON KONTROLLERI
        // ================================
        document.getElementById('startBtn').addEventListener('click', startGame);
        document.getElementById('pauseBtn').addEventListener('click', pauseGame);
        document.getElementById('resetBtn').addEventListener('click', () => {
            gameState.gameOver = false;
            gameState.running = false;
            gameState.paused = false;
            gameOverScreen.style.display = 'none';
            startGame();
        });

        // Oyunu baÅŸlat
        gameLoop();
        highScoreDisplay.innerText = gameState.highScore;
    </script>
</body>
</html>
